<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Sports Unity{% endblock %}</title>

  <link rel="stylesheet" href="{% static 'css/maicons.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
  <link rel="stylesheet" href="{% static 'vendor/owl-carousel/css/owl.carousel.css' %}">
  <link rel="stylesheet" href="{% static 'vendor/animate/animate.css' %}">
  <link rel="stylesheet" href="{% static 'css/theme.css' %}">
  <link rel="stylesheet" href="{% static 'DataTables/datatables.min.css' %}">
  <link rel="stylesheet" href="{% static 'styles/design.css' %}">
  <link rel="stylesheet" href="{% static 'styles/utilities.css' %}">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500|Open+Sans">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
 

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="{% static 'scripts/index.js' %}"> -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    
    <!-- Custom CSS (if any) -->
    <style>
        .card-event img {
            max-height: 200px;
            object-fit: cover;
        }
        .logo-container {
      display: flex;
      align-items: center;
  }
  .logo {
      width: 110px; /* Adjust the width as needed */
      height: auto;
      margin-right: 10px; /* Adjust the spacing between the logo and text */
  }
  .text-primary {
      color: blue; /* Adjust the color as needed */
  }
  .btn-color{
   
    background-color: #00d9a5;
  }
              /* Apply a green underline on hover */
.nav-link:hover {
    color: #00D9A5; /* Optional: Change the color on hover */
    text-decoration: underline;
    text-decoration-color: #00D9A5;
    text-underline-offset: 4px; /* Adjust underline position */
    
}

/* Active menu item styling */
.nav-item.active .nav-link {
    color: #00D9A5;
}
.btn-login{
    background-color: #00d9a5;
   
  }
  .btn {
  margin-top: 20px; /* Add some space above the button */
}
.btn-color{
   
   background-color: #00d9a5;
 }



 
 

 .calendar-container {
    text-align: center;
    /* background-color: white; */
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    padding: 20px;
    max-width: 100%;
    margin: 20px auto;
}

.month-navigation {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    margin-bottom: 10px;
}

.arrow {
    margin: 0 15px;
    text-decoration: none;
    font-size: 1.5em;
    color: #333;
}

.calendar {
    display: flex;
    justify-content: center;
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 5px;
    width: 100%; /* Use full container width */
}

table {
    width: 100%; /* Allow table to use full width */
    border-collapse: collapse;
    margin: 5px 0;
    box-shadow: 0 2px 5px rgba(219, 12, 12, 0.1);
    border-radius: 4px;
}

th, td {
    padding: 8px;
    text-align: center;
    border: 3px solid #ddd;
    width: 14.2%; /* Ensure table cells fill the width of the row */
}

.event-day {
    background-color: #a4d4ff;
}

.event {
    color: black;
    font-weight: bold;
    margin-top: 5px;
    font-size: 0.8em;
}


/* Responsive calendar adjustments */
@media (max-width: 768px) {
    table {
        width: 100%;
    }
}
.modal-content {
  max-width: 800px; /* Limit width for square-like appearance */
  margin: auto;
  border-radius: 15px;
}
.modal-body {
  padding: 20px;
}
.form-label {
  font-weight: bold;
}
    </style>
</head>
<body>
    <div class="back-to-top"></div>


   
    <nav class="navbar navbar-expand-lg navbar-light shadow-sm">
      <div class="container">
    
       <div class="logo-container">
         <img src="{% static 'img/logo2.png' %}" alt="Logo" class="logo">
         <span class="text-primary"></span>
     </div>
    
    
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupport" aria-controls="navbarSupport" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarSupport">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
                <a class="nav-link" href="{% url 'home' %}">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'about' %}">About Us</a>
            </li>
            <!-- <li class="nav-item">
                <a class="nav-link" href="{% url 'university_registration' %}">university</a>
            </li> -->
            <!-- <li class="nav-item">
             <a class="nav-link" href="{% url 'event_calendar' %}">Schedule</a> 
         </li> -->
         <li class="nav-item">
           <a class="nav-link" href="{% url 'player_list' %}">players</a> 
       </li>
       <li class="nav-item">
         <a class="nav-link" href="{% url 'notice_list' %}">Notices</a>       
     </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'event_list' %}">Events</a>
          </li>
          <li class="nav-item">
           <a class="nav-link" href="{% url 'results' %}">Results</a>
       </li>
          <li class="nav-item">
           <a class="nav-link" href="{% url 'tournament_standings' %}">Tournament</a>
       </li>
       <li class="nav-item">
         <a class="nav-link" href="{% url 'stall_list' %}">Stalls</a>
     </li>
            
         
       
          <!-- If the user is not logged in, display the login button -->
  
       
          <li class="nav-item">
            {% if user.is_authenticated %}
              <!-- <a class="nav-link" href="{% url 'user_dashboard' %}">
                <img src="{% static 'img/user-icon.png' %}" alt="User Icon" class="user-icon"> {{ user.username }}
              </a>  -->
              <a class="nav-link" href="{% url 'user_dashboard' %}">
                <i class="fas fa-user-circle"></i> {{ user.username }}
              </a>
            <li  class="nav-item">
              <a class="btn btn-login ml-lg-3" href="{% url 'logout' %}" style="
     margin-top: -5px;">Logout</a>
            </li>
            {% else %}
              <a class="btn btn-primary ml-lg-3" href="{% url 'user_login' %}" style="margin-top: -5px;">Login / Register</a>
            {% endif %}
          </li>
          
      
        </ul>
      </div> <!-- .navbar-collapse -->
      
      </div> <!-- .container -->
    </nav>
      
    <div class="page-banner overlay-dark bg-image" style="background-image: url('{% static "img/events2.jpg" %}');">
        <div class="banner-section">
          <div class="container text-center wow fadeInUp">
            <nav aria-label="Breadcrumb">
              <ol class="breadcrumb breadcrumb-dark bg-transparent justify-content-center py-0 mb-2">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Events</li>
              </ol>
            </nav>
            <h1 class="font-weight-normal">List of Events {{ events.count }}</h1>
          </div> <!-- .container -->
        </div> <!-- .banner-section -->
      </div> <!-- .page-banner -->
    
   

   
   
     <div class="bg-light">
       <div class="page-section py-3 mt-md-n5 custom-index">
         <div class="container-flud">
           <div class="row justify-content-center">
             
             
             
           </div>
         </div>
       </div> <!-- .page-section -->

       <!-- <marquee behavior="scroll" direction="left" scrollamount="5">
        {% for event in events %}
            <span>
                <strong>Title:</strong> {{ event.title }} | 
                <strong>Description:</strong> {{ event.description|truncatewords:10 }} | 
                <strong>Date:</strong> {{ event.start_time|date:"F j, Y, g:i a" }} 
                to {{ event.end_time|date:"F j, Y, g:i a" }} | 
                <strong>Venue:</strong> {{ event.venue }} &nbsp;&nbsp;&nbsp;&nbsp;
            </span>
        {% endfor %}
    </marquee> -->

   
  
<div class="container my-5">
  
    <div class="calendar-container">
      <h2>Upcoming Events</h2>
      <div class="month-navigation">
          <a href="?month={{ prev_month }}&year={{ prev_year }}" class="arrow">&#9664;</a>
          <span>{{ month }} {{ year }}</span>
          <a href="?month={{ next_month }}&year={{ next_year }}" class="arrow">&#9654;</a>
      </div>
      <div class="calendar">
          {{ calendar|safe }}
      </div>
  </div>
  


    <div class="row">
        {% for event in events %}
        <div class="col-md-4 mb-4">
            <div class="card card-event">
                <!-- Display the event image -->
                {% if event.image %}
                    <img src="{{ event.image.url }}" class="card-img-top" alt="{{ event.title }}">
                {% else %}
                    <img src="{% static 'img/default_event.jpg' %}" class="card-img-top" alt="No image available">
                {% endif %}

                <div class="card-body">
                    <h5 class="card-title">{{ event.title }}</h5>
                    <p class="card-text">{{ event.description|truncatewords:20 }}</p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <strong>Date:</strong> {{ event.start_time|date:"F j, Y, g:i a" }} 
                        to {{ event.end_time|date:"F j, Y, g:i a" }}
                    </li>
                    <li class="list-group-item"><strong>Venue:</strong> {{ event.venue }}</li>
                </ul>
                {% if user.is_authenticated %}
    <a href="{% url 'book_event' event.id %}" class="btn btn-primary">Book Event</a>
    <button class="btn btn-primary register-btn" data-event-id="{{ event.id }}" data-bs-toggle="modal" data-bs-target="#registerModal">Register for Event</button>
{% else %}
    <a href="{% url 'user_login' %}?next={% url 'book_event' event.id %}" class="btn btn-color">Login to Book Event</a>
    <button class="btn btn-primary register-btn" data-event-id="{{ event.id }}" data-bs-toggle="modal" data-bs-target="#registerModal">Register for Event</button>
{% endif %}


              
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- If no events are available -->
    {% if not events %}
        <p>No events are available at the moment.</p>
    {% endif %}
</div>


<footer class="page-footer">
  <div class="container">
    <div class="row px-md-3">
      <div class="col-sm-6 col-lg-3 py-3">
        <h5>Company</h5>
        <ul class="footer-menu">
          <li><a href="#">About Us</a></li>
          <li><a href="#">Career</a></li>
          <li><a href="#">Editorial Team</a></li>
          <li><a href="#">Protection</a></li>
        </ul>
      </div>
      <div class="col-sm-6 col-lg-3 py-3">
        <h5>More</h5>
        <ul class="footer-menu">
          <li><a href="#">Terms & Condition</a></li>
          <li><a href="#">Privacy</a></li>
          <li><a href="#">Advertise</a></li>
        
        </ul>
      </div>
      <div class="col-sm-6 col-lg-3 py-3">
        <h5>Our partner</h5>
        <ul class="footer-menu">
          <li><a href="#">Lahore University</a></li>
          <li><a href="#">ISB university</a></li>
          <li><a href="#">Riffha university</a></li>
        </ul>
      </div>
      <div class="col-sm-6 col-lg-3 py-3">
        <h5>Contact</h5>
        <p class="footer-link mt-2">Lahore</p>
        <a href="#" class="footer-link">0300-12345678</a>
        <a href="#" class="footer-link">saad@gmail.com</a>

        <h5 class="mt-3">Social Media</h5>
        <div class="footer-sosmed mt-3">
          <a href="#" target="_blank"><span class="mai-logo-facebook-f"></span></a>
          <a href="#" target="_blank"><span class="mai-logo-twitter"></span></a>
          <a href="#" target="_blank"><span class="mai-logo-google-plus-g"></span></a>
          <a href="#" target="_blank"><span class="mai-logo-instagram"></span></a>
          <a href="#" target="_blank"><span class="mai-logo-linkedin"></span></a>
        </div>
      </div>
    </div>

    <hr>

    <p id="copyright">Copyright &copy; 2024 <a href="" target="_blank"></a>. All right reserved</p>
  </div>
</footer>
<!-- Bootstrap Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- Add modal-lg for larger square-like modal -->
    <div class="modal-content" style="border-radius: 10px; padding: 20px;">
      <div class="modal-header">
        <h5 class="modal-title" id="registerModalLabel">Register for Event</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% if user.is_authenticated %}
          <form id="registerForm" method="post">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="full_name" class="form-label">Full Name</label>
                <input type="text" id="full_name" name="full_name" class="form-control" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="date_of_birth" class="form-label">Date of Birth</label>
                <input type="date" id="date_of_birth" name="date_of_birth" class="form-control" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="age" class="form-label">Age</label>
                <input type="number" id="age" name="age" class="form-control" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="phone_number" class="form-label">Phone Number</label>
                <input type="text" id="phone_number" name="phone_number" class="form-control" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="email" class="form-control" value="{{ user.email }}" readonly>
              </div>
              <div class="col-md-6 mb-3">
                <label for="event" class="form-label">Event</label>
                <select id="event" name="event" class="form-control" required>
                  {% for event in events %}
                    <option value="{{ event.id }}">{{ event.title }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="university" class="form-label">University</label>
                <select id="university" name="university" class="form-control" required>
                  {% for university in universities %}
                    <option value="{{ university.id }}">{{ university.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="password" class="form-label">University Password</label>
                <input type="password" id="password" name="password" class="form-control" required>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        {% else %}
          <p class="text-danger">Please <a href="{% url 'user_login' %}">log in</a> to register for an event.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Custom CSS -->
<style>

</style>

<script>
  $(document).ready(function () {
    $('#registerForm').on('submit', function (event) {
      event.preventDefault();
      $.ajax({
        url: '{% url "event_register" %}',
        method: 'POST',
        data: $(this).serialize(),
        success: function (response) {
          if (response.success) {
            alert('Your registration request has been sent. You will receive a status update soon.');
            $('#registerModal').modal('hide');
          } else {
            alert(response.error);
          }
        },
        error: function () {
          alert('An error occurred while processing your request. Please try again.');
        },
      });
    });
  });
</script>

<!-- Include your scripts at the end of the body tag -->
<script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'vendor/owl-carousel/js/owl.carousel.min.js' %}"></script>
<script src="{% static 'vendor/wow/wow.min.js' %}"></script>
<script src="{% static 'js/theme.js' %}"></script>
<script src="{% static 'DataTables/datatables.min.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>

